name: Run filedemo

inputs:
  access-key:
    required: true
  matrix:
    required: true
  lang:
    required: true
  lang-ext:
    required: true
  keyword_file:
    required: true

runs:
  using: "composite"
  steps:
  - name: Run filedemo (${{ inputs.lang }})
    run: >
      ./build/porcupine_demo_file
      -a ${{ inputs.access-key }}
      -l ../../lib/${{ matrix.platform }}/${{ inputs.matrix.arch }}/libpv_porcupine.${{ inputs.matrix.ext }}
      -m ../../lib/common/porcupine_params${{ inputs.lang-ext }}.pv
      -k ../../resources/keyword_files${{ inputs.lang-ext }}/${{ inputs.matrix.platform }}/${{ inputs.keyword_file }}_${{ inputs.matrix.platform }}.ppn
      -t 0.5
      -w ../../resources/audio_samples/multiple_keywords${{ inputs.lang-ext }}.wav
  